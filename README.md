# Lilliputs


## 概要
[https://lilliputs-hy.com/](https://lilliputs-hy.com/)  
  
Laravel で作成した「今日のメニューが思いつかない」人のためのレシピアプリです。  
  
「ルーレット」( 現在実装作業中 )という独自の機能によってレシピを提案し、  
毎日のメニュー決めをサポートしてくれるレシピサイトを目指しています。


## 工夫・苦労した点

- **インフラ構成**  
開発環境は`docker-compose`による`Laravel` + `Nginx` + `MySQL`の構成、  
本番環境は、開発環境のコンテナ構成を生かす形で AWSの`ECS Fargate` + `RDS`に構築しました。  
また、AWSリソースの作成は基本的に`Terraform`で行いました。  
`CircleCI`のjobに`ECR`イメージと`ECS Fargate`タスクの更新jobを設定していて、  
GitHubのmainブランチへpushした内容がそのまま本番環境に反映されるようになっています。  

- **DB設計**  
アプリ内でメインで扱うモデルであるレシピ(**Recipe**)に持たせるカラムは最小限にとどめ、  
Recipeに関連づける数の可変性や、今後の追加実装への柔軟性を持たせるために、  
材料群、調理工程群、メイン食材、メイン調理方法に関してはそれぞれ  
**Ingredient**, **Process**, **Maingred**, **Method**という別モデルとして管理し、  
**Recipe**モデルとリレーションを組む形で設計しました。  

- **検索機能**  
検索機能は、レシピのタイトルによる部分一致のキーワード検索と、  
セレクトボックスの選択によるカテゴリ検索を実装しました。  
カテゴリ分類は二種のモデル(Maingred, Method)のセレクトボックスを扱うため、    
利便性を考慮してVue.jsのAxiosを利用した非同期通信で実装しました。  


## 使用技術
|                    |             |
|--------------------|-------------|
| **PHP**            | 7.3.23      |
| **Laravel**        | 6.18.43     |
| **Vue**            | 2.5.17      | 
| **Nginx**          | 1.19.2      | 
| **MySQL**          | 5.7.31      | 
| **Docker**         | 19.03.8     |
| **docker-compose** | 1.25.5      |
| **Terraform**      | 0.13.4      |
| **CircleCI**       | 2.0         |
| **MacOS Catalina** | 10.15.6     |

##### 本番環境で利用したAWSの主なリソース
|                       |                    |
|-----------------------|--------------------|
| コンテナ運用            | ECS Fargate        |
| イメージ管理            | ECR                |
| データベース            | RDS (MySQL 5.7.31) |
| ロードバランサー         | ELB (ALB)          |
| ドメイン管理            | Route53            |
| SSL証明書              | ACM                |
| 画像アップロード         | S3                 |
| 仮想ネットワーク         | VPC                |


## 更新履歴

2020/10/19 -   作成開始  
2020/10/30 -   AWS ECS Fargate にてデプロイ  
2020/11/02 -   検索機能の実装

現在追加機能の実装作業中です。
